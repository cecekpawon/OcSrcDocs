<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenCore: Library/OcAppleKeyMapLib/UpDownDetection.c File Reference</title>
<link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-zephyr.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-zephyr.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="LogoApprox.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenCore
   &#160;<span id="projectnumber">1.0.4</span>
   </div>
   <div id="projectbrief">OpenCore Bootloader</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_up_down_detection_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">UpDownDetection.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;Uefi.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_apple_key_map_aggregator_8h_source.html">Protocol/AppleKeyMapAggregator.h</a>&gt;</code><br />
<code>#include &lt;Library/BaseLib.h&gt;</code><br />
<code>#include &lt;Library/BaseMemoryLib.h&gt;</code><br />
<code>#include &lt;Library/DebugLib.h&gt;</code><br />
<code>#include &lt;Library/MemoryAllocationLib.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_oc_apple_key_map_lib_8h_source.html">Library/OcAppleKeyMapLib.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_oc_debug_log_lib_8h_source.html">Library/OcDebugLogLib.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_oc_misc_lib_8h_source.html">Library/OcMiscLib.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_oc_timer_lib_8h_source.html">Library/OcTimerLib.h</a>&gt;</code><br />
<code>#include &lt;Library/TimerLib.h&gt;</code><br />
</div>
<p><a href="_up_down_detection_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a956ad2b599a0e5b485b57ff391a65e62" id="r_a956ad2b599a0e5b485b57ff391a65e62"><td class="memItemLeft" align="right" valign="top">VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a956ad2b599a0e5b485b57ff391a65e62">OcFreeKeyRepeatContext</a> (<a class="el" href="struct_o_c___k_e_y___r_e_p_e_a_t___c_o_n_t_e_x_t.html">OC_KEY_REPEAT_CONTEXT</a> **Context)</td></tr>
<tr class="separator:a956ad2b599a0e5b485b57ff391a65e62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31c3a9625a4c1047d411b12d540758e1" id="r_a31c3a9625a4c1047d411b12d540758e1"><td class="memItemLeft" align="right" valign="top">EFI_STATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a31c3a9625a4c1047d411b12d540758e1">OcInitKeyRepeatContext</a> (OUT <a class="el" href="struct_o_c___k_e_y___r_e_p_e_a_t___c_o_n_t_e_x_t.html">OC_KEY_REPEAT_CONTEXT</a> **Context, IN <a class="el" href="struct_a_p_p_l_e___k_e_y___m_a_p___a_g_g_r_e_g_a_t_o_r___p_r_o_t_o_c_o_l.html">APPLE_KEY_MAP_AGGREGATOR_PROTOCOL</a> *KeyMap, IN UINTN MaxKeysHeld, IN UINT64 InitialDelay, IN UINT64 SubsequentDelay, IN BOOLEAN PreventInitialRepeat)</td></tr>
<tr class="separator:a31c3a9625a4c1047d411b12d540758e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43bb37ce8a816abe4ae22ef2f7400a8a" id="r_a43bb37ce8a816abe4ae22ef2f7400a8a"><td class="memItemLeft" align="right" valign="top">EFI_STATUS EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a43bb37ce8a816abe4ae22ef2f7400a8a">OcGetUpDownKeys</a> (IN OUT <a class="el" href="struct_o_c___k_e_y___r_e_p_e_a_t___c_o_n_t_e_x_t.html">OC_KEY_REPEAT_CONTEXT</a> *RepeatContext, OUT <a class="el" href="_apple_hid_8h.html#ab5cfb0ffcc18a5d558ebb549d03b16be">APPLE_MODIFIER_MAP</a> *Modifiers, IN OUT UINTN *NumKeysUp, OUT <a class="el" href="_apple_hid_8h.html#a8d2fc63bf912ded3405bc7e13eb910f8">APPLE_KEY_CODE</a> *KeysUp OPTIONAL, IN OUT UINTN *NumKeysDown, OUT <a class="el" href="_apple_hid_8h.html#a8d2fc63bf912ded3405bc7e13eb910f8">APPLE_KEY_CODE</a> *KeysDown OPTIONAL, IN UINT64 CurrentTime)</td></tr>
<tr class="separator:a43bb37ce8a816abe4ae22ef2f7400a8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>AppleKeyMapAggregator edge detection</p>
<p>Copyright (c) 2021, Mike Beaton. All rights reserved.<br  />
 SPDX-License-Identifier: BSD-3-Clause </p>

<p class="definition">Definition in file <a class="el" href="_up_down_detection_8c_source.html">UpDownDetection.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a956ad2b599a0e5b485b57ff391a65e62" name="a956ad2b599a0e5b485b57ff391a65e62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a956ad2b599a0e5b485b57ff391a65e62">&#9670;&#160;</a></span>OcFreeKeyRepeatContext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VOID OcFreeKeyRepeatContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_o_c___k_e_y___r_e_p_e_a_t___c_o_n_t_e_x_t.html">OC_KEY_REPEAT_CONTEXT</a> **</td>          <td class="paramname"><span class="paramname"><em>Context</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free key repeat context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">Context</td><td>Key repeat context to free. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_up_down_detection_8c_source.html#l00021">21</a> of file <a class="el" href="_up_down_detection_8c_source.html">UpDownDetection.c</a>.</p>

</div>
</div>
<a id="a43bb37ce8a816abe4ae22ef2f7400a8a" name="a43bb37ce8a816abe4ae22ef2f7400a8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43bb37ce8a816abe4ae22ef2f7400a8a">&#9670;&#160;</a></span>OcGetUpDownKeys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EFI_STATUS EFIAPI OcGetUpDownKeys </td>
          <td>(</td>
          <td class="paramtype">IN OUT <a class="el" href="struct_o_c___k_e_y___r_e_p_e_a_t___c_o_n_t_e_x_t.html">OC_KEY_REPEAT_CONTEXT</a> *</td>          <td class="paramname"><span class="paramname"><em>RepeatContext</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT <a class="el" href="_apple_hid_8h.html#ab5cfb0ffcc18a5d558ebb549d03b16be">APPLE_MODIFIER_MAP</a> *</td>          <td class="paramname"><span class="paramname"><em>Modifiers</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN OUT UINTN *</td>          <td class="paramname"><span class="paramname"><em>NumKeysUp</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT <a class="el" href="_apple_hid_8h.html#a8d2fc63bf912ded3405bc7e13eb910f8">APPLE_KEY_CODE</a> *KeysUp</td>          <td class="paramname"><span class="paramname"><em>OPTIONAL</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN OUT UINTN *</td>          <td class="paramname"><span class="paramname"><em>NumKeysDown</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT <a class="el" href="_apple_hid_8h.html#a8d2fc63bf912ded3405bc7e13eb910f8">APPLE_KEY_CODE</a> *KeysDown</td>          <td class="paramname"><span class="paramname"><em>OPTIONAL</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINT64</td>          <td class="paramname"><span class="paramname"><em>CurrentTime</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns all key transitions and key modifiers into the appropiate buffers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">RepeatContext</td><td>On input the previous (or newly initialised) repeat context. On output the newly updated key repeat context; values of interest to the caller are not intended to be read from the context, but from the other parameters above. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Modifiers</td><td>The key modifiers currently applicable. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">NumKeysUp</td><td>On input the number of keys allocated for KeysUp. Ignored if KeysUp is null. On output the number of up keys detected, with their keycodes returned into KeysUp if present. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">KeysUp</td><td>A Pointer to a optional caller-allocated buffer in which new up keycodes get returned. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">NumKeysDown</td><td>On input with KeysDown non-null, the number of keys allocated for KeysDown and the total number of keys to check. On input and with KeysDown null, this parameter still represents the total number of keys to check. On output the number of down keys detected, with their keycodes returned into KeysDown if present. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">KeysDown</td><td>A Pointer to an optional caller-allocated buffer in which new down keycodes get returned. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">CurrentTime</td><td>Current time (arbitrary units with sufficient resolution). Need not be valid on initial call only.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The requested key transitions and states have been returned or updated as requested in the various out parameters. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>Unsupported buffer/size combination. </td></tr>
    <tr><td class="paramname">other</td><td>An error returned by a sub-operation. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_up_down_detection_8c_source.html#l00126">126</a> of file <a class="el" href="_up_down_detection_8c_source.html">UpDownDetection.c</a>.</p>

</div>
</div>
<a id="a31c3a9625a4c1047d411b12d540758e1" name="a31c3a9625a4c1047d411b12d540758e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31c3a9625a4c1047d411b12d540758e1">&#9670;&#160;</a></span>OcInitKeyRepeatContext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EFI_STATUS OcInitKeyRepeatContext </td>
          <td>(</td>
          <td class="paramtype">OUT <a class="el" href="struct_o_c___k_e_y___r_e_p_e_a_t___c_o_n_t_e_x_t.html">OC_KEY_REPEAT_CONTEXT</a> **</td>          <td class="paramname"><span class="paramname"><em>Context</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN <a class="el" href="struct_a_p_p_l_e___k_e_y___m_a_p___a_g_g_r_e_g_a_t_o_r___p_r_o_t_o_c_o_l.html">APPLE_KEY_MAP_AGGREGATOR_PROTOCOL</a> *</td>          <td class="paramname"><span class="paramname"><em>KeyMap</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINTN</td>          <td class="paramname"><span class="paramname"><em>MaxKeysHeld</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINT64</td>          <td class="paramname"><span class="paramname"><em>InitialDelay</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINT64</td>          <td class="paramname"><span class="paramname"><em>SubsequentDelay</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN BOOLEAN</td>          <td class="paramname"><span class="paramname"><em>PreventInitialRepeat</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialise key repeat context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">Context</td><td>Allocated key repeat context structure is returned here. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">KeyMap</td><td>The key map aggregator protocol instance to use. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">MaxKeysHeld</td><td>Number of entries to allocate in held keys buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">InitialDelay</td><td>Key repeat initial delay. Same time units as CurrentTime passed to subsequent calls of OcGetUpDownKeys. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">SubsequentDelay</td><td>Key repeat subsequent delay. Same time units as CurrentTime passed to subsequent calls of OcGetUpDownKeys. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">PreventInitialRepeat</td><td>If true, set up buffer so that keys held at init do not repeat until released and then pressed again.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The repeat context has been initialised. </td></tr>
    <tr><td class="paramname">other</td><td>An error returned by a sub-operation. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_up_down_detection_8c_source.html#l00041">41</a> of file <a class="el" href="_up_down_detection_8c_source.html">UpDownDetection.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5ad7f572bbca03234e8e621e192fc099.html">Library</a></li><li class="navelem"><a class="el" href="dir_5b7304bde4a5fedf189add8a0f113c00.html">OcAppleKeyMapLib</a></li><li class="navelem"><a class="el" href="_up_down_detection_8c.html">UpDownDetection.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    // every resize will remove the button, which is why it has to be added again:
    $(window).resize(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>
