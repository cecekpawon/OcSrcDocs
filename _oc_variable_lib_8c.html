<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenCore: Library/OcVariableLib/OcVariableLib.c File Reference</title>
<link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-zephyr.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-zephyr.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="LogoApprox.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenCore
   &#160;<span id="projectnumber">1.0.4</span>
   </div>
   <div id="projectbrief">OpenCore Bootloader</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_oc_variable_lib_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">OcVariableLib.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;Uefi.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_oc_variable_8h_source.html">Guid/OcVariable.h</a>&gt;</code><br />
<code>#include &lt;Library/BaseMemoryLib.h&gt;</code><br />
<code>#include &lt;Library/DebugLib.h&gt;</code><br />
<code>#include &lt;Library/MemoryAllocationLib.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_oc_variable_lib_8h_source.html">Library/OcVariableLib.h</a>&gt;</code><br />
<code>#include &lt;Library/UefiRuntimeServicesTableLib.h&gt;</code><br />
</div>
<p><a href="_oc_variable_lib_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aed92b3015a87c33db289fb4f4a040b7d" id="r_aed92b3015a87c33db289fb4f4a040b7d"><td class="memItemLeft" align="right" valign="top">VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aed92b3015a87c33db289fb4f4a040b7d">OcVariableInit</a> (IN BOOLEAN ForceOcWriteFlash)</td></tr>
<tr class="separator:aed92b3015a87c33db289fb4f4a040b7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bdb57575a6db13b251563109ae6e685" id="r_a0bdb57575a6db13b251563109ae6e685"><td class="memItemLeft" align="right" valign="top">EFI_STATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0bdb57575a6db13b251563109ae6e685">OcSetSystemVariable</a> (IN CHAR16 *VariableName, IN UINT32 Attributes, IN UINTN DataSize, IN VOID *Data, IN EFI_GUID *VendorGuid OPTIONAL)</td></tr>
<tr class="separator:a0bdb57575a6db13b251563109ae6e685"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a00b432f47f31a81986224798166d13bf" id="r_a00b432f47f31a81986224798166d13bf"><td class="memItemLeft" align="right" valign="top">STATIC BOOLEAN&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a00b432f47f31a81986224798166d13bf">mForceOcWriteFlash</a> = FALSE</td></tr>
<tr class="separator:a00b432f47f31a81986224798166d13bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28d044a2483c601c553cc95d0cddb3e0" id="r_a28d044a2483c601c553cc95d0cddb3e0"><td class="memItemLeft" align="right" valign="top">STATIC BOOLEAN&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a28d044a2483c601c553cc95d0cddb3e0">mDebugInitialized</a> = FALSE</td></tr>
<tr class="separator:a28d044a2483c601c553cc95d0cddb3e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>OpenCore Variable library.</p>
<p>Copyright (c) 2021, Marvin Haeuser. All rights reserved.<br  />
 SPDX-License-Identifier: BSD-3-Clause </p>

<p class="definition">Definition in file <a class="el" href="_oc_variable_lib_8c_source.html">OcVariableLib.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0bdb57575a6db13b251563109ae6e685" name="a0bdb57575a6db13b251563109ae6e685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bdb57575a6db13b251563109ae6e685">&#9670;&#160;</a></span>OcSetSystemVariable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EFI_STATUS OcSetSystemVariable </td>
          <td>(</td>
          <td class="paramtype">IN CHAR16 *</td>          <td class="paramname"><span class="paramname"><em>VariableName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINT32</td>          <td class="paramname"><span class="paramname"><em>Attributes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINTN</td>          <td class="paramname"><span class="paramname"><em>DataSize</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN VOID *</td>          <td class="paramname"><span class="paramname"><em>Data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN EFI_GUID *VendorGuid</td>          <td class="paramname"><span class="paramname"><em>OPTIONAL</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the value of an OpenCore system variable to the OpenCore vendor GUID. If the write is to be performed non-volatile, this function guarantees to not request a write if the existing data is identical to the data requested to be written.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">VariableName</td><td>A Null-terminated string that is the name of the vendor's variable. Each VariableName is unique for each VendorGuid. VariableName must contain 1 or more characters. If VariableName is an empty string, then EFI_INVALID_PARAMETER is returned. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Attributes</td><td>Attributes bitmask to set for the variable. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">DataSize</td><td>The size in bytes of the Data buffer. Unless the EFI_VARIABLE_APPEND_WRITE or EFI_VARIABLE_TIME_BASED_AUTHENTICATED_WRITE_ACCESS attribute is set, a size of zero causes the variable to be deleted. When the EFI_VARIABLE_APPEND_WRITE attribute is set, then a SetVariable() call with a DataSize of zero will not cause any change to the variable value (the timestamp associated with the variable may be updated however even if no new data value is provided,see the description of the EFI_VARIABLE_AUTHENTICATION_2 descriptor below. In this case the DataSize will not be zero since the EFI_VARIABLE_AUTHENTICATION_2 descriptor will be populated). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Data</td><td>The contents for the variable. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">VendorGuid</td><td>Variable GUID, defaults to gOcVendorVariableGuid if NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The firmware has successfully stored the variable and its data as defined by the Attributes. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>An invalid combination of attribute bits, name, and GUID was supplied, or the DataSize exceeds the maximum allowed. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>VariableName is an empty string. </td></tr>
    <tr><td class="paramname">EFI_OUT_OF_RESOURCES</td><td>Not enough storage is available to hold the variable and its data. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>The variable could not be retrieved due to a hardware error. </td></tr>
    <tr><td class="paramname">EFI_WRITE_PROTECTED</td><td>The variable in question is read-only. </td></tr>
    <tr><td class="paramname">EFI_WRITE_PROTECTED</td><td>The variable in question cannot be deleted. </td></tr>
    <tr><td class="paramname">EFI_SECURITY_VIOLATION</td><td>The variable could not be written due to EFI_VARIABLE_TIME_BASED_AUTHENTICATED_WRITE_ACESS being set, but the AuthInfo does NOT pass the validation check carried out by the firmware.</td></tr>
    <tr><td class="paramname">EFI_NOT_FOUND</td><td>The variable trying to be updated or deleted was not found. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_oc_variable_lib_8c_source.html#l00035">35</a> of file <a class="el" href="_oc_variable_lib_8c_source.html">OcVariableLib.c</a>.</p>

</div>
</div>
<a id="aed92b3015a87c33db289fb4f4a040b7d" name="aed92b3015a87c33db289fb4f4a040b7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed92b3015a87c33db289fb4f4a040b7d">&#9670;&#160;</a></span>OcVariableInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VOID OcVariableInit </td>
          <td>(</td>
          <td class="paramtype">IN BOOLEAN</td>          <td class="paramname"><span class="paramname"><em>ForceOcWriteFlash</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the OpenCore variable library. No other function may be called before this function has returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ForceOcWriteFlash</td><td>Whether OC system variables should be forced to be written to flash. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_oc_variable_lib_8c_source.html#l00023">23</a> of file <a class="el" href="_oc_variable_lib_8c_source.html">OcVariableLib.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a28d044a2483c601c553cc95d0cddb3e0" name="a28d044a2483c601c553cc95d0cddb3e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28d044a2483c601c553cc95d0cddb3e0">&#9670;&#160;</a></span>mDebugInitialized</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC BOOLEAN mDebugInitialized = FALSE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_oc_variable_lib_8c_source.html#l00020">20</a> of file <a class="el" href="_oc_variable_lib_8c_source.html">OcVariableLib.c</a>.</p>

</div>
</div>
<a id="a00b432f47f31a81986224798166d13bf" name="a00b432f47f31a81986224798166d13bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b432f47f31a81986224798166d13bf">&#9670;&#160;</a></span>mForceOcWriteFlash</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATIC BOOLEAN mForceOcWriteFlash = FALSE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_oc_variable_lib_8c_source.html#l00018">18</a> of file <a class="el" href="_oc_variable_lib_8c_source.html">OcVariableLib.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5ad7f572bbca03234e8e621e192fc099.html">Library</a></li><li class="navelem"><a class="el" href="dir_d624e875696f839dc1dc6da4a56cb6c1.html">OcVariableLib</a></li><li class="navelem"><a class="el" href="_oc_variable_lib_8c.html">OcVariableLib.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    // every resize will remove the button, which is why it has to be added again:
    $(window).resize(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>
