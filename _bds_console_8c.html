<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenCore: Library/DuetBdsLib/BdsConsole.c File Reference</title>
<link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-zephyr.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-zephyr.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="LogoApprox.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenCore
   &#160;<span id="projectnumber">1.0.4</span>
   </div>
   <div id="projectbrief">OpenCore Bootloader</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_bds_console_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">BdsConsole.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;Guid/GlobalVariable.h&gt;</code><br />
<code>#include &lt;Library/DebugLib.h&gt;</code><br />
<code>#include &lt;Library/DevicePathLib.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_duet_bds_lib_8h_source.html">Library/DuetBdsLib.h</a>&gt;</code><br />
<code>#include &lt;Library/MemoryAllocationLib.h&gt;</code><br />
<code>#include &lt;Library/UefiBootServicesTableLib.h&gt;</code><br />
<code>#include &lt;Library/UefiRuntimeServicesTableLib.h&gt;</code><br />
</div>
<p><a href="_bds_console_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad8faeed9772b38804584f3c80fec2150" id="r_ad8faeed9772b38804584f3c80fec2150"><td class="memItemLeft" align="right" valign="top">BOOLEAN&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad8faeed9772b38804584f3c80fec2150">IsNvNeed</a> (IN CHAR16 *ConVarName)</td></tr>
<tr class="separator:ad8faeed9772b38804584f3c80fec2150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9961d6287527f21b8f1bd572e8f899c" id="r_af9961d6287527f21b8f1bd572e8f899c"><td class="memItemLeft" align="right" valign="top">BOOLEAN&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af9961d6287527f21b8f1bd572e8f899c">UpdateSystemTableConsole</a> (IN CHAR16 *VarName, IN EFI_GUID *ConsoleGuid, IN OUT EFI_HANDLE *ConsoleHandle, IN OUT VOID **ProtocolInterface)</td></tr>
<tr class="separator:af9961d6287527f21b8f1bd572e8f899c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66b0598b8bf6c8a995480e9eee12d1c9" id="r_a66b0598b8bf6c8a995480e9eee12d1c9"><td class="memItemLeft" align="right" valign="top">EFI_STATUS EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a66b0598b8bf6c8a995480e9eee12d1c9">BdsLibUpdateConsoleVariable</a> (IN CHAR16 *ConVarName, IN EFI_DEVICE_PATH_PROTOCOL *CustomizedConDevicePath, IN EFI_DEVICE_PATH_PROTOCOL *ExclusiveDevicePath)</td></tr>
<tr class="separator:a66b0598b8bf6c8a995480e9eee12d1c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae491714263bced0670a088105d1ee903" id="r_ae491714263bced0670a088105d1ee903"><td class="memItemLeft" align="right" valign="top">EFI_STATUS EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae491714263bced0670a088105d1ee903">BdsLibConnectConsoleVariable</a> (IN CHAR16 *ConVarName)</td></tr>
<tr class="separator:ae491714263bced0670a088105d1ee903"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37a3a148fe68091cb9703b659578cff5" id="r_a37a3a148fe68091cb9703b659578cff5"><td class="memItemLeft" align="right" valign="top">VOID EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a37a3a148fe68091cb9703b659578cff5">BdsLibConnectAllConsoles</a> (VOID)</td></tr>
<tr class="separator:a37a3a148fe68091cb9703b659578cff5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4da2270db1ae7b03b0054f675bef1d7b" id="r_a4da2270db1ae7b03b0054f675bef1d7b"><td class="memItemLeft" align="right" valign="top">EFI_STATUS EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4da2270db1ae7b03b0054f675bef1d7b">BdsLibConnectAllDefaultConsoles</a> (VOID)</td></tr>
<tr class="separator:a4da2270db1ae7b03b0054f675bef1d7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>BDS Lib functions which contain all the code to connect console device</p>
<p>Copyright (c) 2004 - 2014, Intel Corporation. All rights reserved.<br  />
 This program and the accompanying materials are licensed and made available under the terms and conditions of the BSD License which accompanies this distribution. The full text of the license may be found at <a href="http://opensource.org/licenses/bsd-license.php">http://opensource.org/licenses/bsd-license.php</a></p>
<p>THE PROGRAM IS DISTRIBUTED UNDER THE BSD LICENSE ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED. </p>

<p class="definition">Definition in file <a class="el" href="_bds_console_8c_source.html">BdsConsole.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a37a3a148fe68091cb9703b659578cff5" name="a37a3a148fe68091cb9703b659578cff5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37a3a148fe68091cb9703b659578cff5">&#9670;&#160;</a></span>BdsLibConnectAllConsoles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VOID EFIAPI BdsLibConnectAllConsoles </td>
          <td>(</td>
          <td class="paramtype">VOID</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function will search every simpletext device in current system, and make every simpletext device as a potential console device. </p>

<p class="definition">Definition at line <a class="el" href="_bds_console_8c_source.html#l00429">429</a> of file <a class="el" href="_bds_console_8c_source.html">BdsConsole.c</a>.</p>

</div>
</div>
<a id="a4da2270db1ae7b03b0054f675bef1d7b" name="a4da2270db1ae7b03b0054f675bef1d7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4da2270db1ae7b03b0054f675bef1d7b">&#9670;&#160;</a></span>BdsLibConnectAllDefaultConsoles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EFI_STATUS EFIAPI BdsLibConnectAllDefaultConsoles </td>
          <td>(</td>
          <td class="paramtype">VOID</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function will connect console device base on the console device variable ConIn, ConOut and ErrOut.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>At least one of the ConIn and ConOut device have been connected success. </td></tr>
    <tr><td class="paramname">EFI_STATUS</td><td>Return the status of BdsLibConnectConsoleVariable (). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_bds_console_8c_source.html#l00506">506</a> of file <a class="el" href="_bds_console_8c_source.html">BdsConsole.c</a>.</p>

</div>
</div>
<a id="ae491714263bced0670a088105d1ee903" name="ae491714263bced0670a088105d1ee903"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae491714263bced0670a088105d1ee903">&#9670;&#160;</a></span>BdsLibConnectConsoleVariable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EFI_STATUS EFIAPI BdsLibConnectConsoleVariable </td>
          <td>(</td>
          <td class="paramtype">IN CHAR16 *</td>          <td class="paramname"><span class="paramname"><em>ConVarName</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Connect the console device base on the variable ConVarName, if device path of the ConVarName is multi-instance device path and anyone of the instances is connected success, then this function will return success. If the handle associate with one device path node can not be created successfully, then still give chance to do the dispatch, which load the missing drivers if possible..</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ConVarName</td><td>Console related variable name, ConIn, ConOut, ErrOut.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_NOT_FOUND</td><td>There is not any console devices connected success </td></tr>
    <tr><td class="paramname">EFI_SUCCESS</td><td>Success connect any one instance of the console device path base on the variable ConVarName. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_bds_console_8c_source.html#l00334">334</a> of file <a class="el" href="_bds_console_8c_source.html">BdsConsole.c</a>.</p>

</div>
</div>
<a id="a66b0598b8bf6c8a995480e9eee12d1c9" name="a66b0598b8bf6c8a995480e9eee12d1c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66b0598b8bf6c8a995480e9eee12d1c9">&#9670;&#160;</a></span>BdsLibUpdateConsoleVariable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EFI_STATUS EFIAPI BdsLibUpdateConsoleVariable </td>
          <td>(</td>
          <td class="paramtype">IN CHAR16 *</td>          <td class="paramname"><span class="paramname"><em>ConVarName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN EFI_DEVICE_PATH_PROTOCOL *</td>          <td class="paramname"><span class="paramname"><em>CustomizedConDevicePath</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN EFI_DEVICE_PATH_PROTOCOL *</td>          <td class="paramname"><span class="paramname"><em>ExclusiveDevicePath</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function update console variable based on ConVarName, it can add or remove one specific console device path from the variable</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ConVarName</td><td>Console related variable name, ConIn, ConOut, ErrOut. </td></tr>
    <tr><td class="paramname">CustomizedConDevicePath</td><td>The console device path which will be added to the console variable ConVarName, this parameter can not be multi-instance. </td></tr>
    <tr><td class="paramname">ExclusiveDevicePath</td><td>The console device path which will be removed from the console variable ConVarName, this parameter can not be multi-instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The added device path is same to the removed one. </td></tr>
    <tr><td class="paramname">EFI_SUCCESS</td><td>Success add or remove the device path from the console variable. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_bds_console_8c_source.html#l00198">198</a> of file <a class="el" href="_bds_console_8c_source.html">BdsConsole.c</a>.</p>

</div>
</div>
<a id="ad8faeed9772b38804584f3c80fec2150" name="ad8faeed9772b38804584f3c80fec2150"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8faeed9772b38804584f3c80fec2150">&#9670;&#160;</a></span>IsNvNeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOLEAN IsNvNeed </td>
          <td>(</td>
          <td class="paramtype">IN CHAR16 *</td>          <td class="paramname"><span class="paramname"><em>ConVarName</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if we need to save the EFI variable with "ConVarName" as name as NV type If ConVarName is NULL, then <a class="el" href="coder_8h.html#aca68c0d4ac8df0838e209fb5300f7be3">ASSERT()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ConVarName</td><td>The name of the EFI variable.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">TRUE</td><td>Set the EFI variable as NV type. </td></tr>
    <tr><td class="paramname">FALSE</td><td>EFI variable as NV type can be set NonNV. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_bds_console_8c_source.html#l00035">35</a> of file <a class="el" href="_bds_console_8c_source.html">BdsConsole.c</a>.</p>

</div>
</div>
<a id="af9961d6287527f21b8f1bd572e8f899c" name="af9961d6287527f21b8f1bd572e8f899c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9961d6287527f21b8f1bd572e8f899c">&#9670;&#160;</a></span>UpdateSystemTableConsole()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOLEAN UpdateSystemTableConsole </td>
          <td>(</td>
          <td class="paramtype">IN CHAR16 *</td>          <td class="paramname"><span class="paramname"><em>VarName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN EFI_GUID *</td>          <td class="paramname"><span class="paramname"><em>ConsoleGuid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN OUT EFI_HANDLE *</td>          <td class="paramname"><span class="paramname"><em>ConsoleHandle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN OUT VOID **</td>          <td class="paramname"><span class="paramname"><em>ProtocolInterface</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fill console handle in System Table if there are no valid console handle in.</p>
<p>Firstly, check the validation of console handle in System Table. If it is invalid, update it by the first console device handle from EFI console variable.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">VarName</td><td>The name of the EFI console variable. </td></tr>
    <tr><td class="paramname">ConsoleGuid</td><td>Specified Console protocol GUID. </td></tr>
    <tr><td class="paramname">ConsoleHandle</td><td>On IN, console handle in System Table to be checked. On OUT, new console handle in system table. </td></tr>
    <tr><td class="paramname">ProtocolInterface</td><td>On IN, console protocol on console handle in System Table to be checked. On OUT, new console protocol on new console handle in system table.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">TRUE</td><td>System Table has been updated. </td></tr>
    <tr><td class="paramname">FALSE</td><td>System Table hasn't been updated. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_bds_console_8c_source.html#l00082">82</a> of file <a class="el" href="_bds_console_8c_source.html">BdsConsole.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5ad7f572bbca03234e8e621e192fc099.html">Library</a></li><li class="navelem"><a class="el" href="dir_f865bd1d95408fb2c12ab006df77ce96.html">DuetBdsLib</a></li><li class="navelem"><a class="el" href="_bds_console_8c.html">BdsConsole.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    // every resize will remove the button, which is why it has to be added again:
    $(window).resize(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>
