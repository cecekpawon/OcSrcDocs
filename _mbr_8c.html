<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenCore: Platform/OpenPartitionDxe/Mbr.c File Reference</title>
<link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-zephyr.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-zephyr.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="LogoApprox.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenCore
   &#160;<span id="projectnumber">1.0.4</span>
   </div>
   <div id="projectbrief">OpenCore Bootloader</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_mbr_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Mbr.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="_partition_8h_source.html">Partition.h</a>&quot;</code><br />
</div>
<p><a href="_mbr_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a31969ec27a71702525fed298b209d6cc" id="r_a31969ec27a71702525fed298b209d6cc"><td class="memItemLeft" align="right" valign="top">BOOLEAN&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a31969ec27a71702525fed298b209d6cc">PartitionValidMbr</a> (IN MASTER_BOOT_RECORD *Mbr, IN EFI_LBA LastLba)</td></tr>
<tr class="separator:a31969ec27a71702525fed298b209d6cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa205b510f7f3c60a4a39c904ff17458a" id="r_aa205b510f7f3c60a4a39c904ff17458a"><td class="memItemLeft" align="right" valign="top">EFI_STATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa205b510f7f3c60a4a39c904ff17458a">PartitionInstallMbrChildHandles</a> (IN EFI_DRIVER_BINDING_PROTOCOL *This, IN EFI_HANDLE <a class="el" href="_oc_typing_lib_8h.html#acd483f778a349e0f07adbc1dfe872a15">Handle</a>, IN EFI_DISK_IO_PROTOCOL *DiskIo, IN EFI_DISK_IO2_PROTOCOL *DiskIo2, IN EFI_BLOCK_IO_PROTOCOL *BlockIo, IN EFI_BLOCK_IO2_PROTOCOL *BlockIo2, IN EFI_DEVICE_PATH_PROTOCOL *DevicePath)</td></tr>
<tr class="separator:aa205b510f7f3c60a4a39c904ff17458a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Decode a hard disk partitioned with the legacy MBR found on most PC's</p>
<p>MBR - Master Boot Record is in the first sector of a partitioned hard disk. The MBR supports four partitions per disk. The MBR also contains legacy code that is not run on an EFI system. The legacy code reads the first sector of the active partition into memory and</p>
<p>BPB - BIOS Parameter Block is in the first sector of a FAT file system. The BPB contains information about the FAT file system. The BPB is always on the first sector of a media. The first sector also contains the legacy boot strap code.</p>
<p>Copyright (c) 2018 Qualcomm Datacenter Technologies, Inc. Copyright (c) 2014, Hewlett-Packard Development Company, L.P.<br  />
 Copyright (c) 2006 - 2019, Intel Corporation. All rights reserved.<br  />
 SPDX-License-Identifier: BSD-2-Clause-Patent </p>

<p class="definition">Definition in file <a class="el" href="_mbr_8c_source.html">Mbr.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aa205b510f7f3c60a4a39c904ff17458a" name="aa205b510f7f3c60a4a39c904ff17458a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa205b510f7f3c60a4a39c904ff17458a">&#9670;&#160;</a></span>PartitionInstallMbrChildHandles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EFI_STATUS PartitionInstallMbrChildHandles </td>
          <td>(</td>
          <td class="paramtype">IN EFI_DRIVER_BINDING_PROTOCOL *</td>          <td class="paramname"><span class="paramname"><em>This</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN EFI_HANDLE</td>          <td class="paramname"><span class="paramname"><em>Handle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN EFI_DISK_IO_PROTOCOL *</td>          <td class="paramname"><span class="paramname"><em>DiskIo</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN EFI_DISK_IO2_PROTOCOL *</td>          <td class="paramname"><span class="paramname"><em>DiskIo2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN EFI_BLOCK_IO_PROTOCOL *</td>          <td class="paramname"><span class="paramname"><em>BlockIo</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN EFI_BLOCK_IO2_PROTOCOL *</td>          <td class="paramname"><span class="paramname"><em>BlockIo2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN EFI_DEVICE_PATH_PROTOCOL *</td>          <td class="paramname"><span class="paramname"><em>DevicePath</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Install child handles if the Handle supports MBR format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>Calling context. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Handle</td><td>Parent Handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">DiskIo</td><td>Parent DiskIo interface. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">DiskIo2</td><td>Parent DiskIo2 interface. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">BlockIo</td><td>Parent BlockIo interface. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">BlockIo2</td><td>Parent BlockIo2 interface. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">DevicePath</td><td>Parent Device Path.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>A child handle was added. </td></tr>
    <tr><td class="paramname">EFI_MEDIA_CHANGED</td><td>Media change was detected. </td></tr>
    <tr><td class="paramname">Others</td><td>MBR partition was not found. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_mbr_8c_source.html#l00118">118</a> of file <a class="el" href="_mbr_8c_source.html">Mbr.c</a>.</p>

</div>
</div>
<a id="a31969ec27a71702525fed298b209d6cc" name="a31969ec27a71702525fed298b209d6cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31969ec27a71702525fed298b209d6cc">&#9670;&#160;</a></span>PartitionValidMbr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOLEAN PartitionValidMbr </td>
          <td>(</td>
          <td class="paramtype">IN MASTER_BOOT_RECORD *</td>          <td class="paramname"><span class="paramname"><em>Mbr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN EFI_LBA</td>          <td class="paramname"><span class="paramname"><em>LastLba</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Test to see if the Mbr buffer is a valid MBR.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Mbr</td><td>Parent Handle. </td></tr>
    <tr><td class="paramname">LastLba</td><td>Last Lba address on the device.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">TRUE</td><td>Mbr is a Valid MBR. </td></tr>
    <tr><td class="paramname">FALSE</td><td>Mbr is not a Valid MBR. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_mbr_8c_source.html#l00034">34</a> of file <a class="el" href="_mbr_8c_source.html">Mbr.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_46f0a310448968fe371c870cd868aa1f.html">Platform</a></li><li class="navelem"><a class="el" href="dir_bf4e2e8b85c6dc50b0464e83b14f9dea.html">OpenPartitionDxe</a></li><li class="navelem"><a class="el" href="_mbr_8c.html">Mbr.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    // every resize will remove the button, which is why it has to be added again:
    $(window).resize(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>
